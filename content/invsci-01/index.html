<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/poole_hyde.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/assets/lightning.png"> <title>Investment Science 01</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <h1><a href="/">jvaverka</a></h1> <img src="/assets/lightning.png" width="50%" /> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/about/">About</a> <a class=sidebar-nav-item  href="/posts/">Posts</a> <a class=sidebar-nav-item  href="/tags/">Tags</a> <br> <br> </nav> <a href="https://www.linkedin.com/in/jacob-vaverka-b5965052" title=linkedin ><svg width=30  height=30  viewBox="0 50 512 512"><path fill=currentColor  d="M150.65 100.682c0 27.992-22.508 50.683-50.273 50.683-27.765 0-50.273-22.691-50.273-50.683C50.104 72.691 72.612 50 100.377 50c27.766 0 50.273 22.691 50.273 50.682zm-7.356 86.651H58.277V462h85.017V187.333zm135.901 0h-81.541V462h81.541V317.819c0-38.624 17.779-61.615 51.807-61.615 31.268 0 46.289 22.071 46.289 61.615V462h84.605V288.085c0-73.571-41.689-109.131-99.934-109.131s-82.768 45.369-82.768 45.369v-36.99z"/></svg></a> &nbsp; <a href="https://github.com/jvaverka" title=github ><svg width=30  height=30  viewBox="0 0 25 25" fill=none  stroke=currentColor  stroke-width=2  stroke-linecap=round  stroke-linejoin=round ><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg></a> &nbsp; <a href="https://gitlab.com/jvaverka" title=gitlab ><svg width=34  height=30  xmlns="http://www.w3.org/2000/svg"><path d="M33.164 17.346l-1.742-5.42c-.002-.006 0-.012 0-.017L27.965 1.125A1.638 1.638 0 0026.41 0h-.01a1.626 1.626 0 00-1.541 1.135l-3.222 10.048h-9.96L8.452 1.136A1.627 1.627 0 006.908 0H6.9a1.64 1.64 0 00-1.558 1.136L1.9 11.896l-.008.014-1.746 5.436a2.248 2.248 0 00.803 2.5l15.085 11.108c.038.027.08.04.12.06.008.005.012.012.02.018l.014.005c.012.006.025.01.037.015.01.004.019.01.028.015l.012.006c.044.018.089.033.136.045.023.006.046.006.07.011.06.01.12.027.18.027.024 0 .047-.012.072-.014.072-.006.145-.016.217-.037.013-.004.028-.003.042-.007.01-.003.017-.01.026-.012.027-.01.052-.022.078-.034l.038-.015.013-.005c.018-.01.03-.026.047-.037.028-.016.06-.026.087-.044l.004-.003L32.36 19.846a2.248 2.248 0 00.804-2.5m-23.004-4.08l3.688 11.496-8.851-11.497h5.163m9.301 11.497l3.305-10.306.383-1.196h5.168l-5.641 7.332-3.215 4.175M26.412 3.09l2.595 8.093h-5.189l2.594-8.093M20.97 13.26l-3.05 9.511-1.264 3.94-4.312-13.45h8.626M6.896 3.09l2.6 8.093h-5.19l2.59-8.093M2.18 18.172a.177.177 0 01-.058-.192l1.141-3.553 8.07 10.49-9.153-6.74m28.948 0l-9.153 6.737.353-.46 7.718-10.022 1.14 3.551a.18.18 0 01-.058.194" fill="#ffffff" fill-rule=nonzero /></svg></a> <p class=sidebar-nav-copyright >&copy; Jacob Vaverka. All rights reserved.</p> </div> </div> <div class="content container"> <div class=franklin-content > <div class=tags ><a href="/tags/" id=tag-icon ><svg width=20  height=20  viewBox="0 0 512 512"><defs><style>.cls-1{fill:#141f38}</style></defs><path class=cls-1  d="M215.8 512a76.1 76.1 0 0 1-54.17-22.44L22.44 350.37a76.59 76.59 0 0 1 0-108.32L242 22.44A76.11 76.11 0 0 1 296.2 0h139.2A76.69 76.69 0 0 1 512 76.6v139.19A76.08 76.08 0 0 1 489.56 270L270 489.56A76.09 76.09 0 0 1 215.8 512zm80.4-486.4a50.69 50.69 0 0 0-36.06 14.94l-219.6 219.6a51 51 0 0 0 0 72.13l139.19 139.19a51 51 0 0 0 72.13 0l219.6-219.61a50.67 50.67 0 0 0 14.94-36.06V76.6a51.06 51.06 0 0 0-51-51zm126.44 102.08A38.32 38.32 0 1 1 461 89.36a38.37 38.37 0 0 1-38.36 38.32zm0-51a12.72 12.72 0 1 0 12.72 12.72 12.73 12.73 0 0 0-12.72-12.76z"/><path class=cls-1  d="M217.56 422.4a44.61 44.61 0 0 1-31.76-13.16l-83-83a45 45 0 0 1 0-63.52L211.49 154a44.91 44.91 0 0 1 63.51 0l83 83a45 45 0 0 1 0 63.52L249.31 409.24a44.59 44.59 0 0 1-31.75 13.16zm-96.7-141.61a19.34 19.34 0 0 0 0 27.32l83 83a19.77 19.77 0 0 0 27.31 0l108.77-108.7a19.34 19.34 0 0 0 0-27.32l-83-83a19.77 19.77 0 0 0-27.31 0l-108.77 108.7z"/><path class=cls-1  d="M294.4 281.6a12.75 12.75 0 0 1-9-3.75l-51.2-51.2a12.8 12.8 0 0 1 18.1-18.1l51.2 51.2a12.8 12.8 0 0 1-9.05 21.85zM256 320a12.75 12.75 0 0 1-9.05-3.75l-51.2-51.2a12.8 12.8 0 0 1 18.1-18.1l51.2 51.2A12.8 12.8 0 0 1 256 320zM217.6 358.4a12.75 12.75 0 0 1-9-3.75l-51.2-51.2a12.8 12.8 0 1 1 18.1-18.1l51.2 51.2a12.8 12.8 0 0 1-9.05 21.85z"/></svg></a><a href="/tag/finance/">finance</a></div> <h1 id=investment_science_-_module_1 ><a href="#investment_science_-_module_1" class=header-anchor >Investment Science - Module 1</a></h1> <div class=franklin-toc ><ol><li><a href="#problem_4">Problem 4</a><ol><li><a href="#solution">Solution</a></ol><li><a href="#problem_5">Problem 5</a><ol><li><a href="#solution__2">Solution</a></ol></ol></div> <h2 id=problem_4 ><a href="#problem_4" class=header-anchor >Problem 4</a></h2> <p>The IRR is generally calculated using an iterative procedure. Suppose that we define \(f(\lambda) = -a_{1} + a_{2}\lambda^{2} + \ldots + a_{n}\lambda^{n}\), where all \(a_{i}\)&#39;s are positive and \(n > 1\). Here is an iterative technique that generates a sequence \(\lambda_{0}, \lambda_{1}, \lambda_{2}, \ldots \lambda_{k}, \ldots\) of estimates that converges to the root \(\overline{\lambda} > 0\), solving \(f(\overline{\lambda}) = 0\). Start with any \(\lambda_{0} > 0\) close to the solution. Assuming \(\lambda_{k}\) has been calculated, evaluate</p> \[ f'(\lambda_{k}) = a_{1} + 2a_{2}\lambda_{k} + 3a_{3}\lambda_{k}^{2} + \ldots + na_{n}\lambda_{k}^{n-1} \] <p>and define</p> \[ \lambda_{k+1} = \lambda_{k} - \frac{f(\lambda_{k})}{f'(\lambda_{k})} \] <p>This is Newton&#39;s method. It is based on approximating the function \(f\) by a line tangent to its graph at \(\lambda_{k}\). Try the procedure on \(f(\lambda) = -1 + \lambda + \lambda^{2}\). Start with \(\lambda_{0} = 1\) and compute four additional estimates.</p> <h3 id=solution ><a href="#solution" class=header-anchor >Solution</a></h3> <p>We know</p> \[ \begin{aligned} \lambda_{0} &= 1 \\ \lambda_{k+1} &= \lambda_{k} - \frac{f(\lambda_{k})}{f'(\lambda_{k})} \\ f(\lambda) &= -1 + \lambda + \lambda^{2} \\ f'(\lambda) &= 1 + 2\lambda \\ \end{aligned} \] <p>Using all these equations we can compute four additional estimates.</p> <pre><code class=language-julia ># define function f
f&#40;λ&#41; &#61; -1 &#43; λ &#43; λ^2
# define derivative of f
ḟ&#40;λ&#41; &#61; 1 &#43; 2*λ
# define function to calculate the next λ
next&#40;λ&#41; &#61; λ - f&#40;λ&#41;/ḟ&#40;λ&#41;
# create a list of λs starting with 1
λs &#61; &#91;1.0&#93;
# calculate next four
for n ∈ 1:4
    push&#33;&#40;λs, next&#40;λs&#91;n&#93;&#41;&#41;
end
# display results
@show λs</code></pre><pre><code class="plaintext code-output">λs = [1.0, 0.6666666666666667, 0.6190476190476191, 0.6180344478216818, 0.618033988749989]
</code></pre> <h2 id=problem_5 ><a href="#problem_5" class=header-anchor >Problem 5</a></h2> <p>Suppose that you have the opportunity to plant trees that alter can be sold for lumber. This project requires an initial outlay of money in order to purchase and plant the seedlings. No other cash flow occurs until trees are harvested. However, you have a choice as to when to harvest. If you harvest after 1 year, you get your return quickly; but if you wait, the trees will have additional growth and the revenue generated from the sale of the trees will be greater. Assume that the case flow streams associated with these alternatives are:</p> <ul> <li><p>Wait \(1\) year: \((-1, 2)\)</p> <li><p>Wait \(2\) year: \((-1, ,0, 3)\)</p> <li><p>Wait \(3\) year: \((-1, 0, 0, 4)\)</p> <li><p>\(\vdots\)</p> <li><p>Wait \(n\) year: \((-1, 0, 0, \ldots, n+1)\)</p> </ul> <p>The prevailing interest rate is 10&#37;. When is the best time to cut the trees?</p> <h3 id=solution__2 ><a href="#solution__2" class=header-anchor >Solution</a></h3> <p>Let’s first define a function for calculating the Net Present Value, say on a cash flow stream that looks like \((x_{0}, \ldots, x_{n})\) where \(r\) is the prevailing interest rate and \(k\) is the number of years waited to harvest:</p> \[ NPV = -x_{0} + \frac{x_{k}}{(1+r)^{k}} \] <p>We can create a function to calculate the <strong><em>NPV</em></strong> given a <em>cash flow stream</em> and <em>interest rate</em>. Let&#39;s create a table of the first several values to determine the optimal time to harvest.</p> <pre><code class=language-julia ># define function to calculate net present value
function net_present_value&#40;investment, revenue, year, rate&#41;
    -investment &#43; revenue/&#40;1&#43;rate&#41;^year
end
# define empty array for values
values &#61; &#91;&#93;
# populate some values
for i ∈ 1:20
    append&#33;&#40;values, net_present_value&#40;1, i&#43;1, i, 0.10&#41;&#41;
end
# display some values
@show values</code></pre><pre><code class="plaintext code-output">values = Any[0.8181818181818181, 1.4793388429752063, 2.00525920360631, 2.4150672768253525, 2.72552793835493, 2.95131751037644, 3.1052649458456516, 3.1985664218875973, 3.240976183724846, 3.240976183724846, 3.2059267937767064, 3.142200630234634, 3.055301316313628, 2.9499688145911955, 2.8302727899066134, 2.6996953084325246, 2.5612040402024294, 2.417317008275058, 2.270159816531156, 2.1215161885070124]
</code></pre> <p>To make reading easier, we can create a table or <code>dataframe</code>.</p> <pre><code class=language-julia >using DataFrames
df &#61; DataFrame&#40;Dict&#40;:year &#61;&gt; 1:20, :revenue &#61;&gt; values&#41;&#41;
show&#40;df&#41;</code></pre><pre><code class="plaintext code-output">20×2 DataFrame
 Row │ revenue   year
     │ Any       Int64
─────┼─────────────────
   1 │ 0.818182      1
   2 │ 1.47934       2
   3 │ 2.00526       3
   4 │ 2.41507       4
   5 │ 2.72553       5
   6 │ 2.95132       6
   7 │ 3.10526       7
   8 │ 3.19857       8
  ⋮  │    ⋮        ⋮
  14 │ 2.94997      14
  15 │ 2.83027      15
  16 │ 2.6997       16
  17 │ 2.5612       17
  18 │ 2.41732      18
  19 │ 2.27016      19
  20 │ 2.12152      20
         5 rows omitted</code></pre> <p>A quick glance reveals the maximum revenue.</p> <pre><code class=language-julia >maximum&#40;values&#41;</code></pre><pre><code class="plaintext code-output">3.240976183724846</code></pre>
<pre><code class=language-julia >using PyPlot;
figure&#40;figsize&#61;&#40;8, 6&#41;&#41;;
plot&#40;df.year, df.revenue&#41;;

xlabel&#40;&quot;Year&quot;, fontsize&#61;14&#41;;
ylabel&#40;&quot;Revenue&quot;, fontsize&#61;14&#41;;</code></pre>
<img src="/assets/content/invsci-01/code/output/invsci-01-time-to-harvest.svg" alt="Time to Harvest">
<p>We can see that the graph levels off at the top, and upon inspection of the table we confirm that <strong>years 9 and 10</strong> will yield optimal revenue.</p>

<div class=page-foot >
  <div class=copyright >
      &copy; Jacob Vaverka. Last modified: November 03, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl.
  </div>
</div>
</div>
    </div>  
    
        <script src="/libs/katex/katex.min.js"></script>
<script src="/libs/katex/auto-render.min.js"></script>
<script>renderMathInElement(document.body)</script>

    
    
        <script src="/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>