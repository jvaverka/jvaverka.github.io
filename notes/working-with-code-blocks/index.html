<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/basic.css"> <link rel=stylesheet  href="/css/extra.css"> <link rel=icon  href="/assets/favicon.png"> <title>Working with Code blocks</title> <header> <div class=blog-name ><a href="/">Jacob Vaverka</a></div> <nav> <ul> <li><a href="/about/">About</a> <li><a href="/notes/">Notes</a> <li><a href="/feed.xml"><svg xmlns="http://www.w3.org/2000/svg" width=16  height=16  viewBox="0 0 16 16"> <path fill=currentColor  d="M7.30791,2.56296 C8.72424,3.05942 10.0106,3.8683 11.0718,4.92964 C12.1329,5.99098 12.9415,7.27756 13.4377,8.69398 C13.9339,10.1104 14.1049,11.6203 13.938,13.1119 C13.8766,13.6607 13.3819,14.0559 12.833,13.9945 C12.2842,13.9331 11.889,13.4383 11.9504,12.8895 C12.0839,11.6963 11.9471,10.4883 11.5502,9.35519 C11.1532,8.22205 10.5063,7.19279 9.65742,6.34371 C8.80852,5.49464 7.77939,4.84753 6.64633,4.45037 C5.51327,4.0532 4.30535,3.91617 3.11211,4.04943 C2.56324,4.11072 2.0686,3.71546 2.0073,3.16659 C1.94601,2.61772 2.34127,2.12308 2.89014,2.06178 C4.38168,1.89521 5.89159,2.06651 7.30791,2.56296 Z M4,10 C5.10457,10 6,10.8954 6,12 C6,13.1046 5.10457,14 4,14 C2.89543,14 2,13.1046 2,12 C2,10.8954 2.89543,10 4,10 Z M5.72823,6.25428 C6.67781,6.5399 7.5418,7.05641 8.24292,7.75762 C8.94405,8.45883 9.46045,9.32288 9.74595,10.2725 C10.0315,11.2221 10.0771,12.2277 9.87895,13.1993 C9.76856,13.7404 9.24039,14.0896 8.69925,13.9792 C8.15811,13.8688 7.80891,13.3407 7.9193,12.7995 C8.05144,12.1518 8.02098,11.4814 7.83064,10.8483 C7.64031,10.2153 7.29604,9.63922 6.82862,9.17175 C6.36121,8.70427 5.78522,8.35993 5.15216,8.16952 C4.51911,7.97911 3.84874,7.94857 3.20099,8.08062 C2.65984,8.19094 2.13171,7.84168 2.02139,7.30053 C1.91107,6.75938 2.26032,6.23125 2.80148,6.12093 C3.77309,5.92285 4.77866,5.96867 5.72823,6.25428 Z"/> </svg> </a> </ul> <img src="/assets/hamburger.svg" id=menu-icon > </nav> </header> <div class=franklin-content > <h1 id=working_with_code_blocks ><a href="#working_with_code_blocks" class=header-anchor >Working with code blocks</a></h1> <div class=franklin-toc ><ol><li><a href="#live_evaluation_of_code_blocks">Live evaluation of code blocks</a><li><a href="#including_scripts">Including scripts</a></ol></div> <h2 id=live_evaluation_of_code_blocks ><a href="#live_evaluation_of_code_blocks" class=header-anchor >Live evaluation of code blocks</a></h2> <p>If you would like to show code as well as what the code outputs, you only need to specify where the script corresponding to the code block will be saved.</p> <p>Indeed, what happens is that the code block gets saved as a script which then gets executed. This also allows for that block to not be re-executed every time you change something <em>else</em> on the page.</p> <p>Here&#39;s a simple example &#40;change values in <code>a</code> to see the results being live updated&#41;:</p> <pre><code class=language-julia >using LinearAlgebra
a &#61; &#91;1, 2, 3, 3, 4, 5, 2, 2&#93;
@show dot&#40;a, a&#41;
println&#40;dot&#40;a, a&#41;&#41;</code></pre> <p>You can now show what this would look like:</p> <pre><code class="plaintext code-output">dot(a, a) = 72
72
</code></pre> <p><strong>Notes</strong>:</p> <ul> <li><p>you don&#39;t have to specify the <code>.jl</code> &#40;see below&#41;,</p> <li><p>you do need to explicitly use print statements or <code>@show</code> for things to show, so just leaving a variable at the end like you would in the REPL will show nothing,</p> <li><p>only Julia code blocks are supported at the moment, there may be a support for scripting languages like <code>R</code> or <code>python</code> in the future,</p> <li><p>the way you specify the path is important; see <a href="https://tlienart.github.io/franklindocs/code/index.html#more_on_paths">the docs</a> for more info. If you don&#39;t care about how things are structured in your <code>/assets/</code> folder, just use <code>./scriptname.jl</code>. If you want things to be grouped, use <code>./group/scriptname.jl</code>. For more involved uses, see the docs.</p> </ul> <p>Lastly, it&#39;s important to realise that if you don&#39;t change the content of the code, then that code will only be executed <em>once</em> even if you make multiple changes to the text around it.</p> <p>Here&#39;s another example,</p> <pre><code class=language-julia >for i ∈ 1:5, j ∈ 1:5
    print&#40;&quot; &quot;, rpad&#40;&quot;*&quot;^i,5&#41;, lpad&#40;&quot;*&quot;^&#40;6-i&#41;,5&#41;, j&#61;&#61;5 ? &quot;\n&quot; : &quot; &quot;^4&#41;
end</code></pre> <p>which gives the &#40;utterly useless&#41;:</p> <pre><code class="plaintext code-output"> *    *****     *    *****     *    *****     *    *****     *    *****
 **    ****     **    ****     **    ****     **    ****     **    ****
 ***    ***     ***    ***     ***    ***     ***    ***     ***    ***
 ****    **     ****    **     ****    **     ****    **     ****    **
 *****    *     *****    *     *****    *     *****    *     *****    *
</code></pre> <p>note the absence of <code>.jl</code>, it&#39;s inferred.</p> <p>You can also hide lines &#40;that will be executed nonetheless&#41;:</p> <pre><code class=language-julia >using Random
@show randn&#40;2&#41;</code></pre> <pre><code class="plaintext code-output">randn(2) = [0.2972879845354616, 0.3823959677906078]
</code></pre> <h2 id=including_scripts ><a href="#including_scripts" class=header-anchor >Including scripts</a></h2> <p>Another approach is to include the content of a script that has already been executed. This can be an alternative to the description above if you&#39;d like to only run the code once because it&#39;s particularly slow or because it&#39;s not Julia code. For this you can use the <code>\input</code> command specifying which language it should be tagged as:</p> <p><pre><code class=language-julia >x &#61; randn&#40;5&#41;
y &#61; randn&#40;5&#41;

for i in 1:5
    println&#40;rpad&#40;&quot;*&quot;^i, 10, &#39;-&#39;&#41;, round&#40;dot&#40;x, y&#41;, digits&#61;1&#41;&#41;
end</code></pre> </p> <p>these scripts can be run in such a way that their output is also saved to file, see <code>scripts/generate_results.jl</code> for instance, and you can then also input the results:</p> <p><pre><code class="plaintext code-output">*---------1.3
**--------1.3
***-------1.3
****------1.3
*****-----1.3
</code></pre> </p> <p>which is convenient if you&#39;re presenting code.</p> <p><strong>Note</strong>: paths specification matters, see <a href="https://tlienart.github.io/franklindocs/code/index.html#more_on_paths">the docs</a> for details.</p> <p>Using this approach with the <code>generate_results.jl</code> file also makes sure that all the code on your website works and that all results match the code which makes maintenance easier.</p> <div class=page-foot > <div class=copyright > &copy; Jacob Vaverka. Last modified: November 21, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div><!--content--> <script src="/libs/highlight/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: ' '});</script> </div><!--container-->