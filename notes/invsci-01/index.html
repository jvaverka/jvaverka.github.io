<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/basic.css"> <link rel=stylesheet  href="/css/extra.css"> <link rel=icon  href="/assets/favicon.png"> <title>Investment Science 01</title> <header> <div class=blog-name ><a href="/">Jacob Vaverka</a></div> <nav> <ul> <li><a href="/about/">About</a> <li><a href="/notes/">Notes</a> <li><a href="/feed.xml"><svg xmlns="http://www.w3.org/2000/svg" width=16  height=16  viewBox="0 0 16 16"> <path fill=currentColor  d="M7.30791,2.56296 C8.72424,3.05942 10.0106,3.8683 11.0718,4.92964 C12.1329,5.99098 12.9415,7.27756 13.4377,8.69398 C13.9339,10.1104 14.1049,11.6203 13.938,13.1119 C13.8766,13.6607 13.3819,14.0559 12.833,13.9945 C12.2842,13.9331 11.889,13.4383 11.9504,12.8895 C12.0839,11.6963 11.9471,10.4883 11.5502,9.35519 C11.1532,8.22205 10.5063,7.19279 9.65742,6.34371 C8.80852,5.49464 7.77939,4.84753 6.64633,4.45037 C5.51327,4.0532 4.30535,3.91617 3.11211,4.04943 C2.56324,4.11072 2.0686,3.71546 2.0073,3.16659 C1.94601,2.61772 2.34127,2.12308 2.89014,2.06178 C4.38168,1.89521 5.89159,2.06651 7.30791,2.56296 Z M4,10 C5.10457,10 6,10.8954 6,12 C6,13.1046 5.10457,14 4,14 C2.89543,14 2,13.1046 2,12 C2,10.8954 2.89543,10 4,10 Z M5.72823,6.25428 C6.67781,6.5399 7.5418,7.05641 8.24292,7.75762 C8.94405,8.45883 9.46045,9.32288 9.74595,10.2725 C10.0315,11.2221 10.0771,12.2277 9.87895,13.1993 C9.76856,13.7404 9.24039,14.0896 8.69925,13.9792 C8.15811,13.8688 7.80891,13.3407 7.9193,12.7995 C8.05144,12.1518 8.02098,11.4814 7.83064,10.8483 C7.64031,10.2153 7.29604,9.63922 6.82862,9.17175 C6.36121,8.70427 5.78522,8.35993 5.15216,8.16952 C4.51911,7.97911 3.84874,7.94857 3.20099,8.08062 C2.65984,8.19094 2.13171,7.84168 2.02139,7.30053 C1.91107,6.75938 2.26032,6.23125 2.80148,6.12093 C3.77309,5.92285 4.77866,5.96867 5.72823,6.25428 Z"/> </svg> </a> </ul> <img src="/assets/hamburger.svg" id=menu-icon > </nav> </header> <div class=franklin-content > <div class=tags ><svg width=20  height=20  viewBox="0 0 512 512"> <defs> <style>.cls-1{fill:#0f0f0f}</style> </defs> <path class=cls-1  d="M215.8 512a76.1 76.1 0 0 1-54.17-22.44L22.44 350.37a76.59 76.59 0 0 1 0-108.32L242 22.44A76.11 76.11 0 0 1 296.2 0h139.2A76.69 76.69 0 0 1 512 76.6v139.19A76.08 76.08 0 0 1 489.56 270L270 489.56A76.09 76.09 0 0 1 215.8 512zm80.4-486.4a50.69 50.69 0 0 0-36.06 14.94l-219.6 219.6a51 51 0 0 0 0 72.13l139.19 139.19a51 51 0 0 0 72.13 0l219.6-219.61a50.67 50.67 0 0 0 14.94-36.06V76.6a51.06 51.06 0 0 0-51-51zm126.44 102.08A38.32 38.32 0 1 1 461 89.36a38.37 38.37 0 0 1-38.36 38.32zm0-51a12.72 12.72 0 1 0 12.72 12.72 12.73 12.73 0 0 0-12.72-12.76z"/> <path class=cls-1  d="M217.56 422.4a44.61 44.61 0 0 1-31.76-13.16l-83-83a45 45 0 0 1 0-63.52L211.49 154a44.91 44.91 0 0 1 63.51 0l83 83a45 45 0 0 1 0 63.52L249.31 409.24a44.59 44.59 0 0 1-31.75 13.16zm-96.7-141.61a19.34 19.34 0 0 0 0 27.32l83 83a19.77 19.77 0 0 0 27.31 0l108.77-108.7a19.34 19.34 0 0 0 0-27.32l-83-83a19.77 19.77 0 0 0-27.31 0l-108.77 108.7z"/> <path class=cls-1  d="M294.4 281.6a12.75 12.75 0 0 1-9-3.75l-51.2-51.2a12.8 12.8 0 0 1 18.1-18.1l51.2 51.2a12.8 12.8 0 0 1-9.05 21.85zM256 320a12.75 12.75 0 0 1-9.05-3.75l-51.2-51.2a12.8 12.8 0 0 1 18.1-18.1l51.2 51.2A12.8 12.8 0 0 1 256 320zM217.6 358.4a12.75 12.75 0 0 1-9-3.75l-51.2-51.2a12.8 12.8 0 1 1 18.1-18.1l51.2 51.2a12.8 12.8 0 0 1-9.05 21.85z"/> </svg> <a href="/tag/finance/">finance</a>, <a href="/tag/literate/">literate</a></div> <h1 id=investment_science_-_module_1 ><a href="#investment_science_-_module_1" class=header-anchor >Investment Science - Module 1</a></h1> <div class=franklin-toc ><ol><li><a href="#problem_4">Problem 4</a><ol><li><a href="#solution">Solution</a></ol><li><a href="#problem_5">Problem 5</a><ol><li><a href="#solution__2">Solution</a></ol></ol></div> <h2 id=problem_4 ><a href="#problem_4" class=header-anchor >Problem 4</a></h2> <p>The IRR is generally calculated using an iterative procedure. Suppose that we define \(f(\lambda) = -a_{1} + a_{2}\lambda^{2} + \ldots + a_{n}\lambda^{n}\), where all \(a_{i}\)&#39;s are positive and \(n > 1\). Here is an iterative technique that generates a sequence \(\lambda_{0}, \lambda_{1}, \lambda_{2}, \ldots \lambda_{k}, \ldots\) of estimates that converges to the root \(\overline{\lambda} > 0\), solving \(f(\overline{\lambda}) = 0\). Start with any \(\lambda_{0} > 0\) close to the solution. Assuming \(\lambda_{k}\) has been calculated, evaluate</p> \[ f'(\lambda_{k}) = a_{1} + 2a_{2}\lambda_{k} + 3a_{3}\lambda_{k}^{2} + \ldots + na_{n}\lambda_{k}^{n-1} \] <p>and define</p> \[ \lambda_{k+1} = \lambda_{k} - \frac{f(\lambda_{k})}{f'(\lambda_{k})} \] <p>This is Newton&#39;s method. It is based on approximating the function \(f\) by a line tangent to its graph at \(\lambda_{k}\). Try the procedure on \(f(\lambda) = -1 + \lambda + \lambda^{2}\). Start with \(\lambda_{0} = 1\) and compute four additional estimates.</p> <h3 id=solution ><a href="#solution" class=header-anchor >Solution</a></h3> <p>We know</p> \[ \begin{aligned} \lambda_{0} &= 1 \\ \lambda_{k+1} &= \lambda_{k} - \frac{f(\lambda_{k})}{f'(\lambda_{k})} \\ f(\lambda) &= -1 + \lambda + \lambda^{2} \\ f'(\lambda) &= 1 + 2\lambda \\ \end{aligned} \] <p>Using all these equations we can compute four additional estimates.</p> <pre><code class=language-julia ># define function f
f&#40;λ&#41; &#61; -1 &#43; λ &#43; λ^2
# define derivative of f
ḟ&#40;λ&#41; &#61; 1 &#43; 2*λ
# define function to calculate the next λ
next&#40;λ&#41; &#61; λ - f&#40;λ&#41;/ḟ&#40;λ&#41;
# create a list of λs starting with 1
λs &#61; &#91;1.0&#93;
# calculate next four
for n ∈ 1:4
    push&#33;&#40;λs, next&#40;λs&#91;n&#93;&#41;&#41;
end
# display results
@show λs</code></pre><pre><code class="plaintext code-output">λs = [1.0, 0.6666666666666667, 0.6190476190476191, 0.6180344478216818, 0.618033988749989]
</code></pre> <h2 id=problem_5 ><a href="#problem_5" class=header-anchor >Problem 5</a></h2> <p>Suppose that you have the opportunity to plant trees that alter can be sold for lumber. This project requires an initial outlay of money in order to purchase and plant the seedlings. No other cash flow occurs until trees are harvested. However, you have a choice as to when to harvest. If you harvest after 1 year, you get your return quickly; but if you wait, the trees will have additional growth and the revenue generated from the sale of the trees will be greater. Assume that the case flow streams associated with these alternatives are:</p> <ul> <li><p>Wait \(1\) year: \((-1, 2)\)</p> <li><p>Wait \(2\) year: \((-1, ,0, 3)\)</p> <li><p>Wait \(3\) year: \((-1, 0, 0, 4)\)</p> <li><p>\(\vdots\)</p> <li><p>Wait \(n\) year: \((-1, 0, 0, \ldots, n+1)\)</p> </ul> <p>The prevailing interest rate is 10&#37;. When is the best time to cut the trees?</p> <h3 id=solution__2 ><a href="#solution__2" class=header-anchor >Solution</a></h3> <p>Let’s first define a function for calculating the Net Present Value, say on a cash flow stream that looks like \((x_{0}, \ldots, x_{n})\) where \(r\) is the prevailing interest rate and \(k\) is the number of years waited to harvest:</p> \[ NPV = -x_{0} + \frac{x_{k}}{(1+r)^{k}} \] <p>We can create a function to calculate the <strong><em>NPV</em></strong> given a <em>cash flow stream</em> and <em>interest rate</em>. Let&#39;s create a table of the first several values to determine the optimal time to harvest.</p> <pre><code class=language-julia ># define function to calculate net present value
function net_present_value&#40;investment, revenue, year, rate&#41;
    -investment &#43; revenue/&#40;1&#43;rate&#41;^year
end
# define empty array for values
values &#61; &#91;&#93;
# populate some values
for i ∈ 1:20
    append&#33;&#40;values, net_present_value&#40;1, i&#43;1, i, 0.10&#41;&#41;
end
# display some values
@show values</code></pre><pre><code class="plaintext code-output">values = Any[0.8181818181818181, 1.4793388429752063, 2.00525920360631, 2.4150672768253525, 2.72552793835493, 2.95131751037644, 3.1052649458456516, 3.1985664218875973, 3.240976183724846, 3.240976183724846, 3.2059267937767064, 3.142200630234634, 3.055301316313628, 2.9499688145911955, 2.8302727899066134, 2.6996953084325246, 2.5612040402024294, 2.417317008275058, 2.270159816531156, 2.1215161885070124]
</code></pre> <p>To make reading easier, we can create a table or <code>dataframe</code>.</p> <pre><code class=language-julia >using DataFrames
df &#61; DataFrame&#40;Dict&#40;:year &#61;&gt; 1:20, :revenue &#61;&gt; values&#41;&#41;
show&#40;df&#41;</code></pre><pre><code class="plaintext code-output">20×2 DataFrame
 Row │ revenue   year
     │ Any       Int64
─────┼─────────────────
   1 │ 0.818182      1
   2 │ 1.47934       2
   3 │ 2.00526       3
   4 │ 2.41507       4
   5 │ 2.72553       5
   6 │ 2.95132       6
   7 │ 3.10526       7
   8 │ 3.19857       8
  ⋮  │    ⋮        ⋮
  14 │ 2.94997      14
  15 │ 2.83027      15
  16 │ 2.6997       16
  17 │ 2.5612       17
  18 │ 2.41732      18
  19 │ 2.27016      19
  20 │ 2.12152      20
         5 rows omitted</code></pre> <p>A quick glance reveals the maximum revenue.</p> <pre><code class=language-julia >maximum&#40;values&#41;</code></pre><pre><code class="plaintext code-output">3.240976183724846</code></pre>
<pre><code class=language-julia >using PyPlot;
figure&#40;figsize&#61;&#40;8, 6&#41;&#41;;
plot&#40;df.year, df.revenue&#41;;

xlabel&#40;&quot;Year&quot;, fontsize&#61;14&#41;;
ylabel&#40;&quot;Revenue&quot;, fontsize&#61;14&#41;;</code></pre>
<img src="/assets/notes/invsci-01/code/output/invsci-01-time-to-harvest.svg" alt="Time to Harvest">
<p>We can see that the graph levels off at the top, and upon inspection of the table we confirm that <strong>years 9 and 10</strong> will yield optimal revenue.</p>

<div class=page-foot >
  <div class=copyright >
    &copy; Jacob Vaverka. Last modified: November 21, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    </div><!--content-->
     <script src="/libs/katex/katex.min.js"></script>
<script src="/libs/katex/auto-render.min.js"></script>
<script>renderMathInElement(document.body)</script>
 
     <script src="/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>
 
    </div><!--container-->